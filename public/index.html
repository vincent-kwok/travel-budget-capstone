<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>BYT</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="robots" content="all,follow">
    <!-- Bootstrap-->
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <!-- Google fonts - Open Sans-->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:400,300,700,400italic">
    <!-- Font Awesome CSS-->
    <link rel="stylesheet" href="css/font-awesome.min.css">
    <!-- owl carousel-->
    <link rel="stylesheet" href="css/owl.carousel.css">
    <link rel="stylesheet" href="css/owl.theme.css">
    <!-- theme stylesheet-->
    <link rel="stylesheet" href="css/style.sea.css" id="theme-stylesheet">
    <!-- Favicon-->
    <link rel="shortcut icon" href="favicon.png">

    <script src="https://unpkg.com/vue/dist/vue.js"></script>
    <script src="https://unpkg.com/vue-router/dist/vue-router.js"></script>
    <script src="https://unpkg.com/axios/dist/axios.js"></script>
    <script src="airports.js"></script>
    <script src="index.js" defer></script>
    <!-- Custom stylesheet - for your changes-->
    <link rel="stylesheet" href="css/custom.css">
  </head>

  <body>
    <div id="all">
      <div class="container-fluid">
        <div class="row row-offcanvas row-offcanvas-left">
          <!-- sidebar -->
          <div id="sidebar" class="col-xs-6 col-sm-4 col-md-3 sidebar-offcanvas">
            <div class="sidebar-content">
              <h1 class="sidebar-heading"> <a href="/#/">BYT - BUDGET YOUR TRIP</a></h1>
              <p class="sidebar-p">Traveling is fun. You get to see new landmarks, eat at new restaurants, attend new events, and leave your responsibilities behind.</p>
              <p class="sidebar-p">But sometimes coming back from a trip can leave you regreting some purchases.</p>
              <p class="sidebar-p">That's where budgeting comes in handy.</p>
              <p class="sidebar-p">Decide what to spend ahead of time so you won't have to feel guilty about it later.</p>
              <ul class="sidebar-menu">
                <li><a href="/#/signup">Sign Up</a></li>
                <li><a href="/#/login">Log In</a></li>
                <li class="active"><a href="/#/">Trips</a></li>
                <!-- <li><a href=" '/#/trips/'+trip.id ">Show Trip</a></li> -->
                <li><a href="/#/logout">Log Out</a></li>
              </ul>
              <p class="social">
                <a href="https://www.linkedin.com/in/kwokvincent/" data-animate-hover="pulse" class="external gplus"><i class="fa fa-linkedin"></i></a>
                <a href="https://github.com/vincent-kwok" data-animate-hover="pulse" class="external gplus"><i class="fa fa-github"></i></a>
                <a href="https://www.facebook.com/profile.php?id=12128516" data-animate-hover="pulse" class="external facebook"><i class="fa fa-facebook"></i></a>
                <a href="https://www.instagram.com/vincenzo.__/" data-animate-hover="pulse" class="external instagram"><i class="fa fa-instagram"></i></a>
                <a href="mailto:vkwok22@gmail.com?subject=Let's set up an interview" data-animate-hover="pulse" class="email" target="_blank"><i class="fa fa-envelope"></i></a>
              </p>
              <div class="copyright">
                <p class="credit">&copy;2018 Vincent Kwok | Template by <a href="https://bootstrapious.com/e-commerce-templates" class="external">Bootstrapious</a></p>
                <!-- Please do not remove the backlink to us, unless you support the development at https://bootstrapious.com/donate. It is part of the license conditions. Thanks for understanding :) -->
              </div>
            </div>
          </div>
          <!-- sidebar end -->
          <div class="col-xs-12 col-sm-8 col-md-9 content-column">
            <div class="small-navbar visible-xs">
              <button type="button" data-toggle="offcanvas" class="btn btn-ghost pull-left"> <i class="fa fa-align-left"> </i>Menu</button>
              <h1 class="small-navbar-heading"> <a href="index.html">BUDGET TRIP</a></h1>
            </div>
            <!-- vue.js -->
            <div id="vue-app">
              <router-view></router-view>
            </div>

          </div>
        </div>
      </div>
    </div>

    <!-- Javascript files-->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
    <script src="js/bootstrap.min.js"> </script>
    <script src="js/jquery.cookie.js"> </script>
    <script src="js/ekko-lightbox.js"></script>
    <script src="js/jquery.scrollTo.min.js"></script>
    <script src="js/masonry.pkgd.min.js"></script>
    <script src="js/imagesloaded.pkgd.min.js"></script>
    <script src="js/owl.carousel.min.js"></script>
    <script src="js/front.js"></script>
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDkeeK9HNiCIdBr-r-w7KTQmibiMjxl2nA&libraries=places"></script>
    <!-- AIzaSyDkeeK9HNiCIdBr-r-w7KTQmibiMjxl2nA -->
  </body>
</html>

<template id="home-page">
  <div class="vue-component">
    <div class="row" name="fade">
      <!-- new trip template -->
      <div class="col-xs-12 col-sm-6 col-md-6 col-lg-4 masonry-item"> 
        <div class="box-masonry"><a href="/#/trips/new" title="" class="box-masonry-image with-hover-overlay with-hover-icon"><img src="" alt="" class="img-responsive"></a>
          <div class="box-masonry-text">
            <div class="box-masonry-description">
              <h4>New Destination</h4>

            </div>
          </div>
        </div>
      </div>

      <!-- v-for -->
      <div class="col-xs-12 col-sm-6 col-md-6 col-lg-4 masonry-item" v-for="trip in trips"> 
        <div class="box-masonry"><a v-bind:href="'/#/trips/' + trip.id " title="" class="box-masonry-image with-hover-overlay with-hover-icon"><img src="img/tripBackgrounds/seattle.jpeg" alt="" class="img-responsive"></a>
          <div class="box-masonry-text">
            <div class="box-masonry-description">
              
              <h4>{{ trip.destination }}</h4>
<!--               <h4>{{ trip.home_airport }}</h4>
              <h4>{{ trip.destination_airport }}</h4> -->
              <h5> Start: {{ trip.start_date }}</h5>
              <h5> End: {{ trip.end_date }}</h5>

              <h4>Total Budget: ${{ trip.actual_expenses }} / ${{ trip.budget_total }}</h4>
              <div class="progress">
                <div id="actual_expenses_progress" class="progress-bar bar" role="progressbar" aria-valuemin="0" aria-valuemax="100" style="width:70%">
                  {{ trip.actual_ratio }}%
                </div>
              </div>
              
              <h6> Travel: ${{ trip.actual_travel }} / ${{ trip.budget_flight }}</h6>
              <div class="progress">
                <div id="actual_travel_progress" class="progress-bar bar" role="progressbar" aria-valuemin="0" aria-valuemax="100" style="width:70%">
                  {{ trip.travel_ratio }}%
                </div>
              </div>
              
              <h6> Stay: ${{ trip.actual_accom }} / ${{ trip.budget_accom }}</h6>
              <div class="progress">
                <div id="actual_accom_progress" class="progress-bar bar" role="progressbar" aria-valuemin="0" aria-valuemax="100" style="width:70%">
                  {{ trip.accom_ratio }}%
                </div>
              </div>
              
              <h6> Food: ${{ trip.actual_food }} / ${{ trip.budget_food }}</h6>
              <div class="progress">
                <div id="actual_food_progress" class="progress-bar bar" role="progressbar" aria-valuemin="0" aria-valuemax="100" style="width:70%">
                  {{ trip.food_ratio }}%
                </div>
              </div>
              
              <h6> Fun: ${{ trip.actual_entertainment }} / ${{ trip.budget_fun }}</h6>
              <div class="progress">
                <div id="actual_entertainment_progress" class="progress-bar bar" role="progressbar" aria-valuemin="0" aria-valuemax="100" style="width:70%">
                  {{ trip.entertainment_ratio }}%
                </div>
              </div>
              
              <a v-bind:href=" '/#/expenses?trip_id=' + trip.id " class="btn btn-primary">View Expenses</a>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</template>

<template id="trips-new-page">
  <div class="vue-component">

    <div class="container">
      <h4>New Trip</h4>
      <ul>
        <li class="text-danger" v-for="error in errors">{{ error }}</li>
      </ul>

      <div class="form-group">
        <label>Destination:</label>
        <input ref="autocomplete" placeholder="Search cities" type="text" class="form-control" onfocus="value = ''" v-model="destination">
      </div>

      <div class="form-group">
        <label>Home Airport:</label>
        <input type="text" class="form-control" v-model="home_airport" list="codes">
        <datalist id="codes">
          <option v-for="airport in airports" v-bind:value="airport.iata">{{ airport.iata }} - {{ airport.name }}</option>
        </datalist>
      </div>
      
      <div class="form-group">
        <label>Destination Airport:</label>
        <input type="text" class="form-control" v-model="destination_airport" list="codes">
      </div>

      <div class="form-group">
        <label>Date Arriving:</label>
        <!-- <input type="text" class="form-control" v-model="start_date"> -->
        <input id="meeting" type="date" class="form-control" v-model="start_date" value=""/>
      </div>

      <div class="form-group">
        <label>Date Leaving:</label>
        <!-- <input type="text" class="form-control" v-model="end_date"> -->
        <input id="meeting" type="date" class="form-control" v-model="end_date" value=""/>
      </div>

      <a href="#" class="btn btn-primary" data-toggle="modal" data-target="#flightModal" v-on:click="checkFlights()">View Flights</a>
      <a href="#" class="btn btn-primary" data-toggle="modal" data-target="#hotelModal" v-on:click="checkHotels()">View Hotels</a>

      <h5>Budget:</h5>

      <div class="form-group">
        <label>Flight:</label>
        <input type="text" class="form-control" v-model="budget_flight">
      </div>

      <div class="form-group">
        <label>Accommodations:</label>
        <input type="text" class="form-control" v-model="budget_accom">
      </div>

      <div class="form-group">
        <label>Food:</label>
        <input type="text" class="form-control" v-model="budget_food">
      </div>

      <div class="form-group">
        <label>Entertainment:</label>
        <input type="text" class="form-control" v-model="budget_fun">
      </div>

      <a class="btn btn-primary" v-on:click="submit()">Submit</a>
    </div>

    <!-- Flights Modal -->
    <div class="modal fade" id="flightModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="exampleModalLabel">Flights</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <div v-for="flight in flights">
              <h5>Airline: {{ flight["Airline"] }}</h5>
              <h5>Departure Time: {{ flight["Departure Time"] }}</h5>
              <h5>Arrival Time: {{ flight["Arrival Time"] }}</h5>
              <h5>Fare: ${{ flight["Fare"] }}</h5>
              <br>
            </div>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
            <button onclick="location.href='https://www.skyscanner.com/'" type="button" class="btn btn-primary">SkyScanner</button>
          </div>
        </div>
      </div>
    </div>

    <!-- Hotels Modal -->
    <div class="modal fade" id="hotelModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="exampleModalLabel">Hotels</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <div v-for="hotel in hotels">
              <h5></h5>
              <br>
            </div>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
            <button onclick="location.href='https://www.airbnb.com/'" type="button" class="btn btn-primary">Airbnb</button>
          </div>
        </div>
      </div>
    </div>

  </div>
</template>

<template id="trips-show-page">
  <div class="vue-component">
    <h4>{{ trip.destination }}</h4>
<!--     <h4>{{ trip.home_airport }}</h4>
    <h4>{{ trip.destination_airport }}</h4> -->
    <h5> start: {{ trip.start_date }}</h5>
    <h5> end: {{ trip.end_date }}</h5>
    <h5>budget</h5>
    <h6> flight: {{ trip.budget_flight }}</h6>
    <h6> accom: {{ trip.budget_accom }}</h6>
    <h6> food: {{ trip.budget_food }}</h6>
    <h6> fun: {{ trip.budget_fun }}</h6>
<!--     <h5>Update Trip</h5>
    <div>
      destination: <input type="string" v-model="editTripDescription">
      start_date: <input type="date" v-model="editTripStartDate">
      end_date: <input type="date" v-model="editTripEndDate">
      budget_flight: <input type="integer" v-model="editTripBudgetFlight">
      budget_accom: <input type="integer" v-model="editTripBudgetAccom">
      budget_food: <input type="integer" v-model="editTripBudgetFood">
      budget_fun: <input type="integer" v-model="editTripBudgetFun">
      <button class="btn btn-primary" v-on:click="updateTrip(trip)">Update Trip</button>
    </div> -->
    <button class="btn btn-primary delete" v-on:click="deleteTrip(trip)">Delete Trip</button>
    <a class="btn btn-primary" href="/#/">Back to all trips</a>
  </div>
</template>

<!-- <template id="expenses-new-page">
  <div class="vue-component">

      <div class="form-group">
        <input type="text" class="form-control" v-model="expense_category" value="travel"><input type="text" class="form-control" v-model="expense_description" value="Uber"><input type="text" class="form-control" v-model="expense_amount" value="$10">
        <a class="btn btn-primary" v-on:click="submit()">Submit</a>
      </div>

    <a class="btn btn-primary" href="/#/">Back to all trips</a>
  
  </div>
</template> -->

<template id="expenses-show-page">
  <div class="vue-component">
    <div class="threes">
      <h4 style="margin-top: 0px;">category</h4>
      <h4>description</h4>
      <h4>amount</h4>
    </div>
    <div class="threes">
      <input type="text" class="form-control clear" v-model="category" placeholder="travel">
      <input type="text" class="form-control clear" v-model="description" placeholder="Uber">
      <input type="number" class="form-control clear" v-model="amount" placeholder="$ 10">
      <a class="btn btn-primary" v-on:click="submitExpense()">Submit</a>
    </div>
    <div class="threes" v-for="expense in expenses">
      <h5 style="margin-top: 0px;">{{ expense.category }}</h5>
      <h5>{{ expense.description }}</h5>
      <h5>$ {{ expense.amount }}</h5>
      <a class="btn btn-primary delete" v-on:click="deleteExpense(expense)">Delete</a>
    </div>
    <a class="btn btn-primary" href="/#/">Back to trips</a>
  </div>
</template>

<template id="signup-page">
  <div class="vue-component">

    <div class="container">
      <h1>Signup</h1>
      <ul>
        <li class="text-danger" v-for="error in errors">{{ error }}</li>
      </ul>
      <div class="form-group">
        <label>Email:</label>
        <input type="email" class="form-control" v-model="email">
      </div>
      <div class="form-group">
        <label>Password:</label>
        <input type="password" class="form-control" v-model="password">
      </div>
      <div class="form-group">
        <label>Password confirmation:</label>
        <input type="password" class="form-control" v-model="passwordConfirmation">
      </div>
      <button class="btn btn-primary" v-on:click="submit()">Submit</button>
    </div>

  </div>
</template>

<template id="login-page">
  <div class="vue-component">

    <div class="container">
      <h1>Login</h1>
      <ul>
        <li class="text-danger" v-for="error in errors">{{ error }}</li>
      </ul>
      <div class="form-group">
        <label>Email:</label>
        <input type="email" class="form-control" v-model="email">
      </div>
      <div class="form-group">
        <label>Password:</label>
        <input type="password" class="form-control" v-model="password">
      </div>
      <button class="btn btn-primary" v-on:click="submit()">Submit</button>
    </div>

  </div>
</template>